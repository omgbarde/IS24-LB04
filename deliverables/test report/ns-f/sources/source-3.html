


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=windows-1252"> 
  <title>Coverage Report > GuiView</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">codex.lb04.View.Gui</a>
</div>

<h1>Coverage Summary for Class: GuiView (codex.lb04.View.Gui)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Branch, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">GuiView</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/38)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/40)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/487)
  </span>
</td>
</tr>
  <tr>
    <td class="name">GuiView$1</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/39)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/40)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/488)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package codex.lb04.View.Gui;
&nbsp;
&nbsp;import codex.lb04.Message.ChatMessage;
&nbsp;import codex.lb04.Message.DrawMessage.DrawBoardMessage;
&nbsp;import codex.lb04.Message.GameMessage.CreateGameMessage;
&nbsp;import codex.lb04.Message.GameMessage.EndTurnMessage;
&nbsp;import codex.lb04.Message.LoginMessage;
&nbsp;import codex.lb04.Model.Enumerations.Color;
&nbsp;import codex.lb04.Network.client.ClientSocket;
&nbsp;import codex.lb04.Utils.ConnectionUtil;
&nbsp;import codex.lb04.View.View;
&nbsp;import javafx.animation.PauseTransition;
&nbsp;import javafx.application.Platform;
&nbsp;import javafx.geometry.Insets;
&nbsp;import javafx.geometry.Pos;
&nbsp;import javafx.scene.Group;
&nbsp;import javafx.scene.Scene;
&nbsp;import javafx.scene.control.Button;
&nbsp;import javafx.scene.control.Label;
&nbsp;import javafx.scene.control.TextArea;
&nbsp;import javafx.scene.control.TextField;
&nbsp;import javafx.scene.image.Image;
&nbsp;import javafx.scene.image.ImageView;
&nbsp;import javafx.scene.layout.*;
&nbsp;import javafx.scene.shape.Rectangle;
&nbsp;import javafx.scene.text.Text;
&nbsp;import javafx.scene.transform.Translate;
&nbsp;import javafx.stage.Stage;
&nbsp;import javafx.util.Duration;
&nbsp;
&nbsp;import java.io.FileNotFoundException;
&nbsp;import java.io.IOException;
&nbsp;import java.io.InputStream;
&nbsp;import java.util.ArrayList;
&nbsp;
&nbsp;/**
&nbsp; * This class represents the view of the game in GUI mode
&nbsp; */
<b class="nc">&nbsp;public class GuiView extends View {</b>
&nbsp;    //sizing constants
&nbsp;    private static final double cardWidth = 124;
&nbsp;    private static final double cardHeight = 82.5;
&nbsp;    private static final double resourceWidth = 50;
&nbsp;    private static final double resourceHeight = 50;
&nbsp;
&nbsp;    private final Stage stageReference;
&nbsp;    private ClientSocket clientSocket;
&nbsp;
&nbsp;    //GUI elements to be updated/set multiple times
&nbsp;    private final Label lobbyLabel;
&nbsp;    private TextArea chatText;
&nbsp;    private final Label winnerLabel;
&nbsp;    private final GuiController controller;
&nbsp;    private Group chatGroup;
&nbsp;    private Rectangle initCardBackground;
&nbsp;    private Text alert;
&nbsp;    private Text turnText;
&nbsp;
&nbsp;    /**
&nbsp;     * Constructor for the GUI view
&nbsp;     *
&nbsp;     * @param stage the javafx stage
&nbsp;     */
<b class="nc">&nbsp;    public GuiView(Stage stage) {</b>
<b class="nc">&nbsp;        this.alert = new Text(&quot;&quot;);</b>
<b class="nc">&nbsp;        this.lobbyLabel = new Label();</b>
<b class="nc">&nbsp;        this.chatText = new TextArea();</b>
<b class="nc">&nbsp;        this.winnerLabel = new Label();</b>
<b class="nc">&nbsp;        this.controller = new GuiController(this);</b>
<b class="nc">&nbsp;        this.stageReference = stage;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * method to instantiate the hello scene
&nbsp;     */
&nbsp;    @Override
&nbsp;    public void drawHelloScene() {
&nbsp;        //creating elements
<b class="nc">&nbsp;        StackPane root = new StackPane();</b>
<b class="nc">&nbsp;        InputStream is = getClass().getResourceAsStream(&quot;/graphics/CODEX_wallpaper_minimal.png&quot;);</b>
&nbsp;
<b class="nc">&nbsp;        ImageView imageView = createImageView(root, is);</b>
&nbsp;
<b class="nc">&nbsp;        Button createGameButton = new Button(&quot;Create Game&quot;);</b>
<b class="nc">&nbsp;        createGameButton.setOnAction(actionEvent -&gt; drawCreateGameScene());</b>
<b class="nc">&nbsp;        Button joinGameButton = new Button(&quot;Join Game&quot;);</b>
<b class="nc">&nbsp;        joinGameButton.setOnAction(actionEvent -&gt; drawLoginScene());</b>
&nbsp;
<b class="nc">&nbsp;        Label creditsLabel = new Label(&quot;by Pitesse, Barde, AlexIlLeone, Brio&quot;);</b>
<b class="nc">&nbsp;        creditsLabel.getStyleClass().remove(&quot;label&quot;);</b>
<b class="nc">&nbsp;        creditsLabel.getStyleClass().add(&quot;credits-text&quot;);</b>
&nbsp;
&nbsp;        //append elements to the root
<b class="nc">&nbsp;        stageReference.setTitle(&quot;Codex! - Welcome&quot;);</b>
<b class="nc">&nbsp;        root.getChildren().add(imageView);</b>
<b class="nc">&nbsp;        root.getChildren().add(creditsLabel);</b>
&nbsp;
<b class="nc">&nbsp;        creditsLabel.setTranslateY(200);</b>
<b class="nc">&nbsp;        joinGameButton.setTranslateY(50);</b>
<b class="nc">&nbsp;        joinGameButton.setTranslateY(120);</b>
<b class="nc">&nbsp;        joinGameButton.setTranslateX(50);</b>
<b class="nc">&nbsp;        createGameButton.setTranslateY(120);</b>
<b class="nc">&nbsp;        createGameButton.setTranslateX(-50);</b>
<b class="nc">&nbsp;        root.getChildren().addAll(createGameButton, joinGameButton);</b>
<b class="nc">&nbsp;        Scene scene = new Scene(root, 1520, 850);</b>
<b class="nc">&nbsp;        scene.getStylesheets().add(&quot;/codexTheme.css&quot;);</b>
<b class="nc">&nbsp;        stageReference.setScene(scene);</b>
<b class="nc">&nbsp;        stageReference.show();</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * method to display an image
&nbsp;     *
&nbsp;     * @param root the stack pane
&nbsp;     * @param is   the input stream
&nbsp;     * @return the image view
&nbsp;     */
&nbsp;    private ImageView createImageView(StackPane root, InputStream is) {
<b class="nc">&nbsp;        assert is != null;</b>
<b class="nc">&nbsp;        Image image = new Image(is);</b>
&nbsp;
<b class="nc">&nbsp;        ImageView imageView = new ImageView(image);</b>
<b class="nc">&nbsp;        imageView.setImage(image);</b>
<b class="nc">&nbsp;        imageView.setPreserveRatio(true);</b>
&nbsp;
<b class="nc">&nbsp;        imageView.setFitWidth(root.computeAreaInScreen());</b>
<b class="nc">&nbsp;        imageView.setFitHeight(root.computeAreaInScreen());</b>
<b class="nc">&nbsp;        return imageView;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * method to instantiate the login scene
&nbsp;     */
&nbsp;    @Override
&nbsp;    public void drawLoginScene() {
&nbsp;        //creating elements
<b class="nc">&nbsp;        StackPane root = new StackPane();</b>
&nbsp;
<b class="nc">&nbsp;        InputStream is = getClass().getResourceAsStream(&quot;/graphics/CODEX_wallpaper_pattern.png&quot;);</b>
<b class="nc">&nbsp;        ImageView imageView = createImageView(root, is);</b>
&nbsp;
<b class="nc">&nbsp;        TextField usernameField = new TextField();</b>
<b class="nc">&nbsp;        usernameField.setPromptText(&quot;username&quot;);</b>
<b class="nc">&nbsp;        usernameField.setMaxWidth(200);</b>
&nbsp;
<b class="nc">&nbsp;        TextField serverAddressField = new TextField();</b>
<b class="nc">&nbsp;        serverAddressField.setPromptText(&quot;server address&quot;);</b>
<b class="nc">&nbsp;        serverAddressField.setMaxWidth(200);</b>
&nbsp;
<b class="nc">&nbsp;        TextField serverPortField = new TextField();</b>
<b class="nc">&nbsp;        serverPortField.setPromptText(&quot;server port&quot;);</b>
<b class="nc">&nbsp;        serverPortField.setMaxWidth(200);</b>
&nbsp;
<b class="nc">&nbsp;        Button loginButton = new Button(&quot;Login&quot;);</b>
<b class="nc">&nbsp;        Button backButton = new Button(&quot;Back&quot;);</b>
&nbsp;
<b class="nc">&nbsp;        Label titleLabel = new Label(&quot;insert your username, server address and server port&quot;);</b>
<b class="nc">&nbsp;        Label errorLabel = new Label();</b>
&nbsp;
&nbsp;        //adding listeners
<b class="nc">&nbsp;        loginButton.setOnAction(actionEvent -&gt; {</b>
<b class="nc">&nbsp;            String usr = usernameField.getText();</b>
<b class="nc">&nbsp;            String addr = serverAddressField.getText();</b>
<b class="nc">&nbsp;            int port = ConnectionUtil.defaultPort;</b>
&nbsp;            try {
<b class="nc">&nbsp;                port = Integer.parseInt(serverPortField.getText());</b>
<b class="nc">&nbsp;            } catch (NumberFormatException e) {</b>
<b class="nc">&nbsp;                errorLabel.setText(&quot;Using default port&quot;);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (ConnectionUtil.checkValid(usr, addr, port)) {</b>
&nbsp;                try {
<b class="nc">&nbsp;                    clientSocket = new ClientSocket(usr, addr, port, this.controller);</b>
<b class="nc">&nbsp;                    controller.setClientSocket(clientSocket);</b>
<b class="nc">&nbsp;                } catch (IOException e) {</b>
<b class="nc">&nbsp;                    errorLabel.setText(&quot;Server not available&quot;);</b>
&nbsp;                    return;
&nbsp;                }
<b class="nc">&nbsp;                LoginMessage loginMessage = new LoginMessage(usr);</b>
<b class="nc">&nbsp;                clientSocket.sendMessage((loginMessage));</b>
<b class="nc">&nbsp;                loginButton.setDisable(true);</b>
&nbsp;            } else {
<b class="nc">&nbsp;                errorLabel.setText(&quot;Enter valid username, address and port&quot;);</b>
&nbsp;            }
&nbsp;        });
&nbsp;
<b class="nc">&nbsp;        backButton.setOnAction(actionEvent -&gt; drawHelloScene());</b>
&nbsp;
&nbsp;        //append elements to the root
<b class="nc">&nbsp;        stageReference.setTitle(&quot;Codex! - Login&quot;);</b>
&nbsp;
<b class="nc">&nbsp;        titleLabel.setTranslateY(-200);</b>
<b class="nc">&nbsp;        usernameField.setTranslateY(-100);</b>
<b class="nc">&nbsp;        serverAddressField.setTranslateY(-50);</b>
<b class="nc">&nbsp;        serverPortField.setTranslateY(0);</b>
<b class="nc">&nbsp;        loginButton.setTranslateY(50);</b>
<b class="nc">&nbsp;        backButton.setTranslateY(50);</b>
<b class="nc">&nbsp;        errorLabel.setTranslateY(100);</b>
<b class="nc">&nbsp;        loginButton.setTranslateX(50);</b>
<b class="nc">&nbsp;        backButton.setTranslateX(-50);</b>
&nbsp;
<b class="nc">&nbsp;        root.getChildren().addAll(imageView, titleLabel, usernameField, serverAddressField, serverPortField, loginButton, backButton, errorLabel);</b>
&nbsp;
<b class="nc">&nbsp;        Scene scene = new Scene(root, 1520, 850);</b>
<b class="nc">&nbsp;        scene.getStylesheets().add(&quot;/codexTheme.css&quot;);</b>
<b class="nc">&nbsp;        stageReference.setScene(scene);</b>
<b class="nc">&nbsp;        stageReference.show();</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * method to instantiate the lobby scene
&nbsp;     */
&nbsp;    @Override
&nbsp;    public void drawLobbyScene() {
<b class="nc">&nbsp;        StackPane root = new StackPane();</b>
&nbsp;
<b class="nc">&nbsp;        InputStream is = getClass().getResourceAsStream(&quot;/graphics/CODEX_wallpaper_pattern.png&quot;);</b>
<b class="nc">&nbsp;        ImageView imageView = createImageView(root, is);</b>
&nbsp;
<b class="nc">&nbsp;        Label titleLabel = new Label(&quot;Players in the lobby&quot;);</b>
&nbsp;
<b class="nc">&nbsp;        Button playButton = new Button(&quot;Play&quot;);</b>
<b class="nc">&nbsp;        Button backButton = new Button(&quot;Back&quot;);</b>
&nbsp;
<b class="nc">&nbsp;        stageReference.setTitle(&quot;Codex! - Lobby&quot;);</b>
<b class="nc">&nbsp;        titleLabel.setTranslateY(-200);</b>
<b class="nc">&nbsp;        lobbyLabel.setTranslateY(-100);</b>
<b class="nc">&nbsp;        playButton.setTranslateY(50);</b>
<b class="nc">&nbsp;        playButton.setTranslateX(50);</b>
<b class="nc">&nbsp;        backButton.setTranslateY(50);</b>
<b class="nc">&nbsp;        backButton.setTranslateX(-50);</b>
&nbsp;
<b class="nc">&nbsp;        backButton.setOnAction(actionEvent -&gt; {</b>
<b class="nc">&nbsp;            clientSocket.disconnect();</b>
<b class="nc">&nbsp;            drawHelloScene();</b>
&nbsp;        });
&nbsp;
<b class="nc">&nbsp;        playButton.setOnMouseClicked(actionEvent -&gt; clientSocket.sendMessage(new DrawBoardMessage(clientSocket.getUsername())));</b>
&nbsp;
<b class="nc">&nbsp;        root.getChildren().addAll(imageView, titleLabel, lobbyLabel, playButton, backButton);</b>
&nbsp;
<b class="nc">&nbsp;        Scene scene = new Scene(root);</b>
<b class="nc">&nbsp;        scene.getStylesheets().add(&quot;/codexTheme.css&quot;);</b>
<b class="nc">&nbsp;        stageReference.setScene(scene);</b>
<b class="nc">&nbsp;        stageReference.show();</b>
&nbsp;
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * method to update the lobby scene
&nbsp;     *
&nbsp;     * @param names the updated name list of the players in the lobby
&nbsp;     */
&nbsp;    @Override
&nbsp;    public void updateLobby(ArrayList&lt;String&gt; names) {
<b class="nc">&nbsp;        StringBuilder sb = new StringBuilder();</b>
<b class="nc">&nbsp;        for (String name : names) {</b>
<b class="nc">&nbsp;            sb.append(name).append(&quot;\n&quot;);</b>
&nbsp;        }
<b class="nc">&nbsp;        lobbyLabel.setText(sb.toString());</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * method to instantiate the game creation scene
&nbsp;     */
&nbsp;    @Override
&nbsp;    public void drawCreateGameScene() {
&nbsp;        //creating elements
<b class="nc">&nbsp;        StackPane root = new StackPane();</b>
&nbsp;
<b class="nc">&nbsp;        InputStream is = getClass().getResourceAsStream(&quot;/graphics/CODEX_wallpaper_pattern.png&quot;);</b>
<b class="nc">&nbsp;        ImageView imageView = createImageView(root, is);</b>
&nbsp;
<b class="nc">&nbsp;        Label localHostLabel = new Label(&quot;Insert username, number of players\n&quot; +</b>
&nbsp;                &quot;and server port to setup a game&quot;);
&nbsp;
<b class="nc">&nbsp;        TextField numPlayersChoice = new TextField();</b>
<b class="nc">&nbsp;        numPlayersChoice.setPromptText(&quot;number of players&quot;);</b>
<b class="nc">&nbsp;        numPlayersChoice.setMaxWidth(200);</b>
&nbsp;
<b class="nc">&nbsp;        TextField usernameField = new TextField();</b>
<b class="nc">&nbsp;        usernameField.setPromptText(&quot;choose a username&quot;);</b>
<b class="nc">&nbsp;        usernameField.setMaxWidth(200);</b>
&nbsp;
<b class="nc">&nbsp;        TextField portField = new TextField();</b>
<b class="nc">&nbsp;        portField.setPromptText(&quot;server port (refer to serverApp):&quot;);</b>
<b class="nc">&nbsp;        portField.setMaxWidth(200);</b>
&nbsp;
<b class="nc">&nbsp;        Button confirmButton = new Button(&quot;Confirm&quot;);</b>
<b class="nc">&nbsp;        Button backButton = new Button(&quot;Back&quot;);</b>
<b class="nc">&nbsp;        Label errorLabel = new Label();</b>
&nbsp;
&nbsp;
&nbsp;        //adding listeners
<b class="nc">&nbsp;        confirmButton.setOnAction(actionEvent -&gt; {</b>
&nbsp;            int num;
&nbsp;            int port;
&nbsp;            try {
<b class="nc">&nbsp;                num = Integer.parseInt(numPlayersChoice.getText());</b>
<b class="nc">&nbsp;            } catch (NumberFormatException e) {</b>
<b class="nc">&nbsp;                errorLabel.setText(&quot;Enter a valid number of players&quot;);</b>
&nbsp;                return;
&nbsp;            }
&nbsp;            try {
<b class="nc">&nbsp;                port = Integer.parseInt(portField.getText());</b>
<b class="nc">&nbsp;            } catch (NumberFormatException e) {</b>
<b class="nc">&nbsp;                errorLabel.setText(&quot;Enter a valid number as port&quot;);</b>
&nbsp;                return;
&nbsp;            }
<b class="nc">&nbsp;            String usr = usernameField.getText();</b>
<b class="nc">&nbsp;            confirmButton.setDisable(true);</b>
<b class="nc">&nbsp;            if (ConnectionUtil.checkValid(num, usr)) {</b>
<b class="nc">&nbsp;                if (ConnectionUtil.isValidPort(port)) {</b>
&nbsp;                    try {
<b class="nc">&nbsp;                        clientSocket = new ClientSocket(usr, ConnectionUtil.getLocalhost(), port, this.controller);</b>
<b class="nc">&nbsp;                        controller.setClientSocket(clientSocket);</b>
<b class="nc">&nbsp;                    } catch (IOException e) {</b>
<b class="nc">&nbsp;                        errorLabel.setText(&quot;Server not available&quot;);</b>
<b class="nc">&nbsp;                        confirmButton.setDisable(false);</b>
&nbsp;                        return;
&nbsp;                    }
&nbsp;                } else {
&nbsp;                    try {
<b class="nc">&nbsp;                        clientSocket = new ClientSocket(usr, ConnectionUtil.getLocalhost(), ConnectionUtil.defaultPort, this.controller);</b>
<b class="nc">&nbsp;                        controller.setClientSocket(clientSocket);</b>
<b class="nc">&nbsp;                    } catch (IOException e) {</b>
<b class="nc">&nbsp;                        errorLabel.setText(&quot;Server not available&quot;);</b>
<b class="nc">&nbsp;                        confirmButton.setDisable(false);</b>
&nbsp;                        return;
&nbsp;                    }
&nbsp;                }
<b class="nc">&nbsp;                clientSocket.sendMessage(new CreateGameMessage(usr, num));</b>
&nbsp;            } else {
<b class="nc">&nbsp;                errorLabel.setText(&quot;Invalid input&quot;);</b>
<b class="nc">&nbsp;                confirmButton.setDisable(false);</b>
&nbsp;            }
&nbsp;        });
<b class="nc">&nbsp;        backButton.setOnAction(actionEvent -&gt; drawHelloScene());</b>
&nbsp;
&nbsp;        //append elements to the root
<b class="nc">&nbsp;        stageReference.setTitle(&quot;Codex! - Create Game&quot;);</b>
&nbsp;
<b class="nc">&nbsp;        localHostLabel.setTranslateY(-200);</b>
<b class="nc">&nbsp;        numPlayersChoice.setTranslateY(-50);</b>
<b class="nc">&nbsp;        portField.setTranslateY(0);</b>
<b class="nc">&nbsp;        usernameField.setTranslateY(-100);</b>
<b class="nc">&nbsp;        confirmButton.setTranslateY(50);</b>
<b class="nc">&nbsp;        backButton.setTranslateY(50);</b>
<b class="nc">&nbsp;        errorLabel.setTranslateY(100);</b>
<b class="nc">&nbsp;        confirmButton.setTranslateX(50);</b>
<b class="nc">&nbsp;        backButton.setTranslateX(-50);</b>
&nbsp;
<b class="nc">&nbsp;        root.getChildren().addAll(imageView, localHostLabel, usernameField, numPlayersChoice, portField, confirmButton, errorLabel, backButton);</b>
&nbsp;
<b class="nc">&nbsp;        Scene scene = new Scene(root, 1520, 850);</b>
<b class="nc">&nbsp;        scene.getStylesheets().add(&quot;/codexTheme.css&quot;);</b>
<b class="nc">&nbsp;        stageReference.setScene(scene);</b>
<b class="nc">&nbsp;        stageReference.show();</b>
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    /**
&nbsp;     * method to instantiate the board scene
&nbsp;     */
&nbsp;    @Override
&nbsp;    public void drawBoardScene() {
<b class="nc">&nbsp;        controller.reset();</b>
<b class="nc">&nbsp;        chatText = new TextArea();</b>
<b class="nc">&nbsp;        chatGroup = new Group();</b>
&nbsp;
&nbsp;        //border pane containing all
<b class="nc">&nbsp;        BorderPane root = new BorderPane();</b>
&nbsp;        //group for the movable grid
<b class="nc">&nbsp;        Group movableRoot = new Group();</b>
&nbsp;
&nbsp;        //pane for the center of the window
<b class="nc">&nbsp;        Pane center = new Pane();</b>
&nbsp;
&nbsp;        //Hbox containing turn text and end turn button
<b class="nc">&nbsp;        HBox topBox = new HBox(50);</b>
<b class="nc">&nbsp;        HBox.setHgrow(topBox, Priority.ALWAYS);</b>
<b class="nc">&nbsp;        topBox.setBackground(new Background(new BackgroundFill(javafx.scene.paint.Color.BLACK, CornerRadii.EMPTY, Insets.EMPTY)));</b>
<b class="nc">&nbsp;        topBox.setAlignment(Pos.CENTER);</b>
<b class="nc">&nbsp;        topBox.setMaxHeight(50);</b>
&nbsp;
&nbsp;        //Vbox containing cards in hand and buttons to chat and flip, positioned on the left
<b class="nc">&nbsp;        VBox handBox = new VBox();</b>
<b class="nc">&nbsp;        VBox.setVgrow(handBox, Priority.ALWAYS);</b>
<b class="nc">&nbsp;        handBox.setBackground(new Background(new BackgroundFill(javafx.scene.paint.Color.BLACK, CornerRadii.EMPTY, Insets.EMPTY)));</b>
<b class="nc">&nbsp;        handBox.setAlignment(Pos.CENTER);</b>
<b class="nc">&nbsp;        handBox.setMaxWidth(cardWidth);</b>
&nbsp;
&nbsp;        //Vbox containing drawable cards positioned on the right
<b class="nc">&nbsp;        VBox visibleCardsBox = new VBox();</b>
<b class="nc">&nbsp;        VBox.setVgrow(handBox, Priority.ALWAYS);</b>
<b class="nc">&nbsp;        visibleCardsBox.setBackground(new Background(new BackgroundFill(javafx.scene.paint.Color.BLACK, CornerRadii.EMPTY, Insets.EMPTY)));</b>
<b class="nc">&nbsp;        visibleCardsBox.setAlignment(Pos.TOP_RIGHT);</b>
<b class="nc">&nbsp;        visibleCardsBox.setMaxWidth(cardWidth);</b>
&nbsp;
&nbsp;        //Hbox containing points and objectives at the bottom of the screen
<b class="nc">&nbsp;        HBox bottomBox = new HBox(1);</b>
<b class="nc">&nbsp;        HBox.setHgrow(bottomBox, Priority.ALWAYS);</b>
<b class="nc">&nbsp;        bottomBox.setBackground(new Background(new BackgroundFill(javafx.scene.paint.Color.BLACK, CornerRadii.EMPTY, Insets.EMPTY)));</b>
<b class="nc">&nbsp;        bottomBox.setAlignment(Pos.CENTER);</b>
<b class="nc">&nbsp;        bottomBox.setMaxHeight(cardHeight);</b>
&nbsp;
&nbsp;        //sub-box containing resources and points
<b class="nc">&nbsp;        HBox pointsBox = new HBox();</b>
<b class="nc">&nbsp;        HBox.setHgrow(pointsBox, Priority.ALWAYS);</b>
<b class="nc">&nbsp;        pointsBox.setAlignment(Pos.CENTER);</b>
<b class="nc">&nbsp;        pointsBox.setMaxHeight(resourceHeight);</b>
&nbsp;
&nbsp;        //sub-box containing objective cards
<b class="nc">&nbsp;        HBox objectivesBox = new HBox();</b>
<b class="nc">&nbsp;        HBox.setHgrow(pointsBox, Priority.ALWAYS);</b>
<b class="nc">&nbsp;        objectivesBox.setAlignment(Pos.CENTER);</b>
<b class="nc">&nbsp;        objectivesBox.setMaxHeight(cardHeight);</b>
&nbsp;
&nbsp;        //button to flip selected card
<b class="nc">&nbsp;        Button flipButton = new Button(&quot;flip card&quot;);</b>
<b class="nc">&nbsp;        flipButton.setMaxWidth(75);</b>
<b class="nc">&nbsp;        flipButton.setOnMouseClicked(e -&gt; {</b>
&nbsp;            try {
<b class="nc">&nbsp;                controller.flipCard();</b>
<b class="nc">&nbsp;            } catch (FileNotFoundException ex) {</b>
<b class="nc">&nbsp;                throw new RuntimeException(ex);</b>
&nbsp;            }
&nbsp;        });
&nbsp;
&nbsp;        //button to end turn
<b class="nc">&nbsp;        Button endTurnButton = new Button(&quot;end turn&quot;);</b>
<b class="nc">&nbsp;        endTurnButton.setMaxWidth(75);</b>
<b class="nc">&nbsp;        endTurnButton.setOnMouseClicked(e -&gt; clientSocket.sendMessage(new EndTurnMessage(clientSocket.getUsername())));</b>
&nbsp;
&nbsp;        //button to toggle chat
<b class="nc">&nbsp;        Button chatButton = new Button(&quot;Chat&quot;);</b>
<b class="nc">&nbsp;        chatButton.setMaxWidth(75);</b>
<b class="nc">&nbsp;        chatButton.setOnMouseClicked(e -&gt; controller.toggleChat());</b>
&nbsp;
<b class="nc">&nbsp;        BorderPane.setAlignment(movableRoot, Pos.CENTER);</b>
<b class="nc">&nbsp;        BorderPane.setAlignment(handBox, Pos.CENTER);</b>
<b class="nc">&nbsp;        BorderPane.setAlignment(visibleCardsBox, Pos.CENTER);</b>
<b class="nc">&nbsp;        BorderPane.setAlignment(endTurnButton, Pos.CENTER);</b>
<b class="nc">&nbsp;        BorderPane.setAlignment(objectivesBox, Pos.BOTTOM_LEFT);</b>
<b class="nc">&nbsp;        BorderPane.setAlignment(pointsBox, Pos.BOTTOM_RIGHT);</b>
<b class="nc">&nbsp;        BorderPane.setAlignment(endTurnButton, Pos.CENTER);</b>
<b class="nc">&nbsp;        BorderPane.setAlignment(bottomBox, Pos.CENTER);</b>
&nbsp;
&nbsp;        //setup center
<b class="nc">&nbsp;        createGrid(movableRoot);</b>
<b class="nc">&nbsp;        center.getChildren().add(movableRoot);</b>
<b class="nc">&nbsp;        createChoiceBoxes(center);</b>
<b class="nc">&nbsp;        createAlertText(center);</b>
<b class="nc">&nbsp;        createChatBox(chatGroup, center);</b>
<b class="nc">&nbsp;        root.setCenter(center);</b>
&nbsp;
&nbsp;        //setup top
<b class="nc">&nbsp;        createTurnText(topBox);</b>
<b class="nc">&nbsp;        topBox.getChildren().add(endTurnButton);</b>
<b class="nc">&nbsp;        root.setTop(topBox);</b>
&nbsp;
&nbsp;        //setup left
<b class="nc">&nbsp;        createHandBox(handBox);</b>
<b class="nc">&nbsp;        handBox.getChildren().addAll(new Rectangle(cardWidth, 10), flipButton, new Rectangle(cardWidth, 10), chatButton);</b>
<b class="nc">&nbsp;        root.setLeft(handBox);</b>
&nbsp;
&nbsp;        //setup right
<b class="nc">&nbsp;        createResourceCardsBox(visibleCardsBox);</b>
<b class="nc">&nbsp;        visibleCardsBox.getChildren().add(new Rectangle(cardWidth, 10));</b>
<b class="nc">&nbsp;        createGoldCardsBox(visibleCardsBox);</b>
<b class="nc">&nbsp;        root.setRight(visibleCardsBox);</b>
&nbsp;
&nbsp;        //setup bottom
<b class="nc">&nbsp;        createObjectivesBox(bottomBox);</b>
<b class="nc">&nbsp;        bottomBox.getChildren().add(new Rectangle(50, cardHeight));</b>
<b class="nc">&nbsp;        createPointsBox(bottomBox);</b>
<b class="nc">&nbsp;        root.setBottom(bottomBox);</b>
&nbsp;
<b class="nc">&nbsp;        Scene scene = new Scene(root);</b>
&nbsp;        //set camera movement for the movable grid
<b class="nc">&nbsp;        createCameraTranslate(scene, movableRoot);</b>
&nbsp;
<b class="nc">&nbsp;        Platform.runLater(() -&gt; {</b>
<b class="nc">&nbsp;            scene.getStylesheets().add(&quot;/codexTheme.css&quot;);</b>
<b class="nc">&nbsp;            stageReference.setTitle(&quot;Codex! - your board&quot;);</b>
<b class="nc">&nbsp;            stageReference.setScene(scene);</b>
<b class="nc">&nbsp;            stageReference.show();</b>
&nbsp;        });
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * sets the alert text with initial styling and controls tutorial
&nbsp;     *
&nbsp;     * @param centerRoot the center pane where the text is placed
&nbsp;     */
&nbsp;    private void createAlertText(Pane centerRoot) {
<b class="nc">&nbsp;        this.alert = new Text(&quot;&quot;);</b>
<b class="nc">&nbsp;        displayTimedAlertText(&quot;&quot;&quot;</b>
&nbsp;                        GAME CONTROLS:
&nbsp;                        To select a card LEFT click on it
&nbsp;                        To flip a card select it and click the flip card button
&nbsp;                        To pick the initial card and secret objective RIGHT click on it
&nbsp;                        To draw a card click on it
&nbsp;                        To pass the turn click on the end turn button
&nbsp;                        To place a card select it and click where you want to place it
&nbsp;                        To move the camera use WASD&quot;&quot;&quot;,
<b class="nc">&nbsp;                25);</b>
<b class="nc">&nbsp;        centerRoot.getChildren().add(alert);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * creates the turn text
&nbsp;     *
&nbsp;     * @param topBox the HBox at the top of the screen where the text is placed
&nbsp;     */
&nbsp;    private void createTurnText(HBox topBox) {
<b class="nc">&nbsp;        Text yourTurn = new Text(&quot;&quot;);</b>
<b class="nc">&nbsp;        yourTurn.getStyleClass().add(&quot;turn-text&quot;);</b>
<b class="nc">&nbsp;        yourTurn.setWrappingWidth(200);</b>
<b class="nc">&nbsp;        setYouTurnDisplay(yourTurn);</b>
<b class="nc">&nbsp;        topBox.getChildren().add(yourTurn);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * creates choice boxes for initial card and secret objectives
&nbsp;     *
&nbsp;     * @param centerRoot the center pane where the boxes are placed
&nbsp;     */
&nbsp;    private void createChoiceBoxes(Pane centerRoot) {
<b class="nc">&nbsp;        Rectangle initialCardDisplay = new Rectangle(300, 250, cardWidth, cardHeight);</b>
&nbsp;        //initialCardDisplay.setFill(Color.RED.getPaint());
<b class="nc">&nbsp;        this.initCardBackground = initialCardDisplay;</b>
&nbsp;
<b class="nc">&nbsp;        Rectangle secretObjectiveDisplay1 = new Rectangle(450, 200, cardWidth, cardHeight);</b>
&nbsp;        //secretObjectiveDisplay1.setFill(Color.RED.getPaint());
<b class="nc">&nbsp;        secretObjectiveDisplay1.setUserData(0);</b>
&nbsp;
<b class="nc">&nbsp;        Rectangle secretObjectiveDisplay2 = new Rectangle(450, 300, cardWidth, cardHeight);</b>
&nbsp;        //secretObjectiveDisplay2.setFill(Color.RED.getPaint());
<b class="nc">&nbsp;        secretObjectiveDisplay2.setUserData(1);</b>
&nbsp;
<b class="nc">&nbsp;        controller.setUpInitialCardDisplay(initialCardDisplay);</b>
<b class="nc">&nbsp;        controller.setUpSecretObjectivesToChoose(secretObjectiveDisplay1, secretObjectiveDisplay2);</b>
&nbsp;
<b class="nc">&nbsp;        centerRoot.getChildren().addAll(initialCardDisplay, secretObjectiveDisplay1, secretObjectiveDisplay2);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * creates the chat box
&nbsp;     *
&nbsp;     * @param chatRoot   the group containing the chat elements
&nbsp;     * @param centerRoot the center pane where the chat box is placed
&nbsp;     */
&nbsp;    private void createChatBox(Group chatRoot, Pane centerRoot) {
&nbsp;        //background for the chat box
<b class="nc">&nbsp;        Rectangle chatBox = new Rectangle(0, 0, 500, 500);</b>
<b class="nc">&nbsp;        chatBox.setFill(Color.BLACK.getPaint());</b>
&nbsp;
<b class="nc">&nbsp;        chatText.getStyleClass().add(&quot;chat-text&quot;);</b>
<b class="nc">&nbsp;        chatText.setEditable(false);</b>
&nbsp;
<b class="nc">&nbsp;        TextField messageField = new TextField();</b>
<b class="nc">&nbsp;        messageField.setPromptText(&quot;Type your message here&quot;);</b>
&nbsp;
<b class="nc">&nbsp;        Button sendButton = new Button(&quot;Send&quot;);</b>
&nbsp;
<b class="nc">&nbsp;        sendButton.setOnAction(actionEvent -&gt; {</b>
<b class="nc">&nbsp;            String msg = messageField.getText();</b>
<b class="nc">&nbsp;            if (!msg.isEmpty()) {</b>
<b class="nc">&nbsp;                clientSocket.sendMessage(new ChatMessage(clientSocket.getUsername(), messageField.getText()));</b>
&nbsp;            }
<b class="nc">&nbsp;            messageField.clear();</b>
&nbsp;        });
&nbsp;
&nbsp;        //set spacing and position
<b class="nc">&nbsp;        chatText.setPrefSize(400, 350);</b>
<b class="nc">&nbsp;        chatText.setTranslateX(40);</b>
<b class="nc">&nbsp;        chatText.setTranslateY(40);</b>
<b class="nc">&nbsp;        sendButton.setTranslateX(390);</b>
<b class="nc">&nbsp;        sendButton.setTranslateY(400);</b>
<b class="nc">&nbsp;        messageField.setMinWidth(300);</b>
<b class="nc">&nbsp;        messageField.setTranslateX(50);</b>
<b class="nc">&nbsp;        messageField.setTranslateY(400);</b>
&nbsp;
<b class="nc">&nbsp;        chatRoot.getChildren().addAll(chatBox, chatText, messageField, sendButton);</b>
<b class="nc">&nbsp;        chatRoot.setVisible(false);</b>
&nbsp;
<b class="nc">&nbsp;        centerRoot.getChildren().add(chatRoot);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * creates rectangles for the resource cards
&nbsp;     *
&nbsp;     * @param visibleCardsBox the VBox where the decks are placed
&nbsp;     */
&nbsp;    private void createResourceCardsBox(VBox visibleCardsBox) {
&nbsp;        //Display of the resource cards that can be drawn
<b class="nc">&nbsp;        Rectangle ResourceCard1 = new Rectangle(0, 0, cardWidth, cardHeight);</b>
&nbsp;        //ResourceCard1.setFill(Color.RED.getPaint());
<b class="nc">&nbsp;        ResourceCard1.setUserData(0);</b>
&nbsp;
<b class="nc">&nbsp;        Rectangle ResourceCard2 = new Rectangle(0, 0, cardWidth, cardHeight);</b>
&nbsp;        //ResourceCard2.setFill(Color.RED.getPaint());
<b class="nc">&nbsp;        ResourceCard2.setUserData(1);</b>
&nbsp;
<b class="nc">&nbsp;        Rectangle ResourceCard3 = new Rectangle(0, 0, cardWidth, cardHeight);</b>
&nbsp;        //ResourceCard3.setFill(Color.RED.getPaint());
<b class="nc">&nbsp;        ResourceCard3.setUserData(2);</b>
&nbsp;
<b class="nc">&nbsp;        controller.setUpDrawableResources(ResourceCard1, ResourceCard2, ResourceCard3);</b>
&nbsp;
<b class="nc">&nbsp;        visibleCardsBox.getChildren().addAll(ResourceCard1, ResourceCard2, ResourceCard3);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * creates rectangles for the gold cards
&nbsp;     *
&nbsp;     * @param visibleCardsBox the VBox where the decks are placed
&nbsp;     */
&nbsp;    private void createGoldCardsBox(VBox visibleCardsBox) {
&nbsp;        //Display of the gold cards that can be drawn
<b class="nc">&nbsp;        Rectangle GoldCard1 = new Rectangle(cardWidth, cardHeight);</b>
&nbsp;        //GoldCard1.setFill(Color.RED.getPaint());
<b class="nc">&nbsp;        GoldCard1.setUserData(0);</b>
&nbsp;
<b class="nc">&nbsp;        Rectangle GoldCard2 = new Rectangle(cardWidth, cardHeight);</b>
&nbsp;        //GoldCard2.setFill(Color.RED.getPaint());
<b class="nc">&nbsp;        GoldCard2.setUserData(1);</b>
&nbsp;
<b class="nc">&nbsp;        Rectangle GoldCard3 = new Rectangle(cardWidth, cardHeight);</b>
&nbsp;        //GoldCard3.setFill(Color.RED.getPaint());
<b class="nc">&nbsp;        GoldCard3.setUserData(2);</b>
&nbsp;
<b class="nc">&nbsp;        controller.setUpDrawableGold(GoldCard1, GoldCard2, GoldCard3);</b>
&nbsp;
<b class="nc">&nbsp;        visibleCardsBox.getChildren().addAll(GoldCard1, GoldCard2, GoldCard3);</b>
&nbsp;
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * creates rectangles for the hand cards
&nbsp;     *
&nbsp;     * @param handBox the VBox where the hand is placed
&nbsp;     */
&nbsp;    private void createHandBox(VBox handBox) {
&nbsp;        //cards in hand
<b class="nc">&nbsp;        Rectangle HandCard1 = new Rectangle(cardWidth, cardHeight);</b>
&nbsp;        //HandCard1.setFill(Color.RED.getPaint());
&nbsp;
<b class="nc">&nbsp;        Rectangle HandCard2 = new Rectangle(cardWidth, cardHeight);</b>
&nbsp;        //HandCard2.setFill(Color.RED.getPaint());
&nbsp;
<b class="nc">&nbsp;        Rectangle HandCard3 = new Rectangle(cardWidth, cardHeight);</b>
&nbsp;        //HandCard3.setFill(Color.RED.getPaint());
&nbsp;
<b class="nc">&nbsp;        controller.setUpHandMap(HandCard1, HandCard2, HandCard3);</b>
&nbsp;
<b class="nc">&nbsp;        handBox.getChildren().addAll(HandCard1, HandCard2, HandCard3);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * creates rectangles for the objective cards
&nbsp;     *
&nbsp;     * @param objectivesBox the HBox where the objectives are placed
&nbsp;     */
&nbsp;    private void createObjectivesBox(HBox objectivesBox) {
&nbsp;        //common objectives
<b class="nc">&nbsp;        Rectangle commonObjective1 = new Rectangle(cardWidth, cardHeight);</b>
&nbsp;        //commonObjective1.setFill(Color.RED.getPaint());
&nbsp;
<b class="nc">&nbsp;        Rectangle commonObjective2 = new Rectangle(cardWidth, cardHeight);</b>
&nbsp;        //commonObjective2.setFill(Color.RED.getPaint());
&nbsp;
&nbsp;        //secret objective
<b class="nc">&nbsp;        Rectangle secretObjective = new Rectangle(cardWidth, cardHeight);</b>
&nbsp;        //secretObjective.setFill(Color.RED.getPaint());
&nbsp;        //this.secretObjectiveBackground = secretObjective;
&nbsp;
<b class="nc">&nbsp;        controller.setUpCommonObjectivesMap(commonObjective1, commonObjective2);</b>
<b class="nc">&nbsp;        controller.setSecretObjectiveMap(secretObjective);</b>
&nbsp;
<b class="nc">&nbsp;        objectivesBox.getChildren().addAll(commonObjective1, commonObjective2, secretObjective);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * creates the points box
&nbsp;     *
&nbsp;     * @param pointsBox the HBox where the points are placed
&nbsp;     */
&nbsp;    private void createPointsBox(HBox pointsBox) {
&nbsp;        //resources
<b class="nc">&nbsp;        VBox mushroomBox = new VBox();</b>
<b class="nc">&nbsp;        mushroomBox.setAlignment(Pos.CENTER);</b>
<b class="nc">&nbsp;        StackPane mushroomStack = new StackPane();</b>
<b class="nc">&nbsp;        Rectangle mushrooms = new Rectangle(resourceWidth, resourceHeight);</b>
<b class="nc">&nbsp;        Rectangle mushrooms_points = new Rectangle(resourceWidth, cardHeight);</b>
<b class="nc">&nbsp;        Text mush_label = new Text(&quot;0&quot;);</b>
<b class="nc">&nbsp;        mush_label.getStyleClass().add(&quot;points-text&quot;);</b>
<b class="nc">&nbsp;        controller.addRectangleToPointsDisplay(mushrooms_points, mush_label);</b>
&nbsp;
&nbsp;        try {
<b class="nc">&nbsp;            controller.setImageToRectangle(&quot;/board_icons/mushroom_icon.png&quot;, mushrooms);</b>
<b class="nc">&nbsp;        } catch (FileNotFoundException e) {</b>
<b class="nc">&nbsp;            throw new RuntimeException(e);</b>
&nbsp;        }
<b class="nc">&nbsp;        mushroomBox.getChildren().addAll(mushrooms, mush_label);</b>
<b class="nc">&nbsp;        mushroomStack.getChildren().addAll(mushrooms_points, mushroomBox);</b>
&nbsp;
<b class="nc">&nbsp;        VBox animalsBox = new VBox();</b>
<b class="nc">&nbsp;        animalsBox.setAlignment(Pos.CENTER);</b>
<b class="nc">&nbsp;        StackPane animalStack = new StackPane();</b>
<b class="nc">&nbsp;        Rectangle animals = new Rectangle(resourceWidth, resourceHeight);</b>
<b class="nc">&nbsp;        Rectangle animals_points = new Rectangle(resourceWidth, cardHeight);</b>
<b class="nc">&nbsp;        Text animals_label = new Text(&quot;0&quot;);</b>
<b class="nc">&nbsp;        animals_label.getStyleClass().add(&quot;points-text&quot;);</b>
<b class="nc">&nbsp;        controller.addRectangleToPointsDisplay(animals_points, animals_label);</b>
&nbsp;
&nbsp;        try {
<b class="nc">&nbsp;            controller.setImageToRectangle(&quot;/board_icons/animal_icon.png&quot;, animals);</b>
<b class="nc">&nbsp;        } catch (FileNotFoundException e) {</b>
<b class="nc">&nbsp;            throw new RuntimeException(e);</b>
&nbsp;        }
<b class="nc">&nbsp;        animalsBox.getChildren().addAll(animals, animals_label);</b>
<b class="nc">&nbsp;        animalStack.getChildren().addAll(animals_points, animalsBox);</b>
&nbsp;
&nbsp;
<b class="nc">&nbsp;        VBox insectBox = new VBox();</b>
<b class="nc">&nbsp;        insectBox.setAlignment(Pos.CENTER);</b>
<b class="nc">&nbsp;        StackPane insectStack = new StackPane();</b>
<b class="nc">&nbsp;        Rectangle insect = new Rectangle(resourceWidth, resourceHeight);</b>
<b class="nc">&nbsp;        Rectangle insect_points = new Rectangle(resourceWidth, cardHeight);</b>
<b class="nc">&nbsp;        Text insect_label = new Text(&quot;0&quot;);</b>
<b class="nc">&nbsp;        insect_label.getStyleClass().add(&quot;points-text&quot;);</b>
<b class="nc">&nbsp;        controller.addRectangleToPointsDisplay(insect_points, insect_label);</b>
&nbsp;
&nbsp;        try {
<b class="nc">&nbsp;            controller.setImageToRectangle(&quot;/board_icons/insect_icon.png&quot;, insect);</b>
<b class="nc">&nbsp;        } catch (FileNotFoundException e) {</b>
<b class="nc">&nbsp;            throw new RuntimeException(e);</b>
&nbsp;        }
<b class="nc">&nbsp;        insectBox.getChildren().addAll(insect, insect_label);</b>
<b class="nc">&nbsp;        insectStack.getChildren().addAll(insect_points, insectBox);</b>
&nbsp;
<b class="nc">&nbsp;        VBox leafBox = new VBox();</b>
<b class="nc">&nbsp;        leafBox.setAlignment(Pos.CENTER);</b>
<b class="nc">&nbsp;        StackPane leafStack = new StackPane();</b>
<b class="nc">&nbsp;        Rectangle leaves = new Rectangle(resourceWidth, resourceHeight);</b>
<b class="nc">&nbsp;        Rectangle leaves_points = new Rectangle(resourceWidth, cardHeight);</b>
<b class="nc">&nbsp;        Text leaves_label = new Text(&quot;0&quot;);</b>
<b class="nc">&nbsp;        leaves_label.getStyleClass().add(&quot;points-text&quot;);</b>
<b class="nc">&nbsp;        controller.addRectangleToPointsDisplay(leaves_points, leaves_label);</b>
&nbsp;
&nbsp;        try {
<b class="nc">&nbsp;            controller.setImageToRectangle(&quot;/board_icons/leaf_icon.png&quot;, leaves);</b>
<b class="nc">&nbsp;        } catch (FileNotFoundException e) {</b>
<b class="nc">&nbsp;            throw new RuntimeException(e);</b>
&nbsp;        }
<b class="nc">&nbsp;        leafBox.getChildren().addAll(leaves, leaves_label);</b>
<b class="nc">&nbsp;        leafStack.getChildren().addAll(leaves_points, leafBox);</b>
&nbsp;
<b class="nc">&nbsp;        VBox quillBox = new VBox();</b>
<b class="nc">&nbsp;        quillBox.setAlignment(Pos.CENTER);</b>
<b class="nc">&nbsp;        StackPane quillStack = new StackPane();</b>
<b class="nc">&nbsp;        Rectangle quills = new Rectangle(resourceWidth, resourceHeight);</b>
<b class="nc">&nbsp;        Rectangle quills_points = new Rectangle(resourceWidth, cardHeight);</b>
<b class="nc">&nbsp;        Text quills_label = new Text(&quot;0&quot;);</b>
<b class="nc">&nbsp;        quills_label.getStyleClass().add(&quot;points-text&quot;);</b>
<b class="nc">&nbsp;        controller.addRectangleToPointsDisplay(quills_points, quills_label);</b>
&nbsp;
&nbsp;        try {
<b class="nc">&nbsp;            controller.setImageToRectangle(&quot;/board_icons/quill_icon.png&quot;, quills);</b>
<b class="nc">&nbsp;        } catch (FileNotFoundException e) {</b>
<b class="nc">&nbsp;            throw new RuntimeException(e);</b>
&nbsp;        }
<b class="nc">&nbsp;        quillBox.getChildren().addAll(quills, quills_label);</b>
<b class="nc">&nbsp;        quillStack.getChildren().addAll(quills_points, quillBox);</b>
&nbsp;
<b class="nc">&nbsp;        VBox inkwellBox = new VBox();</b>
<b class="nc">&nbsp;        inkwellBox.setAlignment(Pos.CENTER);</b>
<b class="nc">&nbsp;        StackPane inkwellStack = new StackPane();</b>
<b class="nc">&nbsp;        Rectangle inkwells = new Rectangle(0, 0, resourceWidth, resourceHeight);</b>
<b class="nc">&nbsp;        Rectangle inkwells_points = new Rectangle(resourceWidth, cardHeight);</b>
<b class="nc">&nbsp;        Text inkwells_label = new Text(&quot;0&quot;);</b>
<b class="nc">&nbsp;        inkwells_label.getStyleClass().add(&quot;points-text&quot;);</b>
<b class="nc">&nbsp;        controller.addRectangleToPointsDisplay(inkwells_points, inkwells_label);</b>
&nbsp;
&nbsp;        try {
<b class="nc">&nbsp;            controller.setImageToRectangle(&quot;/board_icons/inkwell_icon.png&quot;, inkwells);</b>
<b class="nc">&nbsp;        } catch (FileNotFoundException e) {</b>
<b class="nc">&nbsp;            throw new RuntimeException(e);</b>
&nbsp;        }
<b class="nc">&nbsp;        inkwellBox.getChildren().addAll(inkwells, inkwells_label);</b>
<b class="nc">&nbsp;        inkwellStack.getChildren().addAll(inkwells_points, inkwellBox);</b>
&nbsp;
<b class="nc">&nbsp;        VBox manuscriptBox = new VBox();</b>
<b class="nc">&nbsp;        manuscriptBox.setAlignment(Pos.CENTER);</b>
<b class="nc">&nbsp;        StackPane manuscriptStack = new StackPane();</b>
<b class="nc">&nbsp;        Rectangle manuscript = new Rectangle(0, 0, resourceWidth, resourceHeight);</b>
<b class="nc">&nbsp;        Rectangle manuscript_points = new Rectangle(resourceWidth, cardHeight);</b>
<b class="nc">&nbsp;        Text manuscript_label = new Text(&quot;0&quot;);</b>
<b class="nc">&nbsp;        manuscript_label.getStyleClass().add(&quot;points-text&quot;);</b>
<b class="nc">&nbsp;        controller.addRectangleToPointsDisplay(manuscript_points, manuscript_label);</b>
&nbsp;
&nbsp;        try {
<b class="nc">&nbsp;            controller.setImageToRectangle(&quot;/board_icons/manuscript_icon.png&quot;, manuscript);</b>
<b class="nc">&nbsp;        } catch (FileNotFoundException e) {</b>
<b class="nc">&nbsp;            throw new RuntimeException(e);</b>
&nbsp;        }
<b class="nc">&nbsp;        manuscriptBox.getChildren().addAll(manuscript, manuscript_label);</b>
<b class="nc">&nbsp;        manuscriptStack.getChildren().addAll(manuscript_points, manuscriptBox);</b>
&nbsp;
<b class="nc">&nbsp;        VBox scoreBox = new VBox();</b>
<b class="nc">&nbsp;        scoreBox.setAlignment(Pos.CENTER);</b>
<b class="nc">&nbsp;        StackPane scoreStack = new StackPane();</b>
<b class="nc">&nbsp;        Rectangle pointsPadding = new Rectangle(0, 0, resourceWidth, 22);</b>
<b class="nc">&nbsp;        Rectangle Points_points = new Rectangle(resourceWidth, cardHeight);</b>
<b class="nc">&nbsp;        Text points_label = new Text(&quot;0&quot;);</b>
<b class="nc">&nbsp;        controller.addRectangleToPointsDisplay(Points_points, points_label);</b>
<b class="nc">&nbsp;        Text points_text = new Text(&quot;Points&quot;);</b>
<b class="nc">&nbsp;        points_label.getStyleClass().add(&quot;points-text&quot;);</b>
<b class="nc">&nbsp;        points_text.getStyleClass().add(&quot;points-text&quot;);</b>
<b class="nc">&nbsp;        scoreBox.getChildren().addAll(points_text, pointsPadding, points_label);</b>
<b class="nc">&nbsp;        scoreStack.getChildren().addAll(Points_points, scoreBox);</b>
&nbsp;
<b class="nc">&nbsp;        pointsBox.getChildren().addAll(mushroomStack, animalStack, insectStack, leafStack, quillStack, inkwellStack, manuscriptStack, scoreStack);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * creates the grid of the board
&nbsp;     *
&nbsp;     * @param movableRoot the group containing the grid
&nbsp;     */
&nbsp;    private void createGrid(Group movableRoot) {
<b class="nc">&nbsp;        int gridSize = 50;</b>
<b class="nc">&nbsp;        double rectangleWidth = cardWidth - 30;//change these values to change di distance between rectangles</b>
<b class="nc">&nbsp;        double rectangleHeight = cardHeight - 33;</b>
<b class="nc">&nbsp;        double opacity = 0;</b>
&nbsp;
<b class="nc">&nbsp;        for (int i = 0; i &lt; gridSize; i++) {</b>
<b class="nc">&nbsp;            for (int j = 0; j &lt; gridSize; j++) {</b>
&nbsp;                // Subtract half the grid size from the x and y coordinates to center the grid
<b class="nc">&nbsp;                double x = (i - gridSize / 2.0) * rectangleWidth;</b>
<b class="nc">&nbsp;                double y = (j - gridSize / 2.0) * rectangleHeight;</b>
&nbsp;
<b class="nc">&nbsp;                Rectangle gridRectangle = new Rectangle(x, y, cardWidth, cardHeight);</b>
&nbsp;
<b class="nc">&nbsp;                gridRectangle.setFill(javafx.scene.paint.Color.GREY);</b>
<b class="nc">&nbsp;                gridRectangle.setOpacity(opacity);</b>
&nbsp;                // Add an outline to the rectangle
<b class="nc">&nbsp;                gridRectangle.setStroke(javafx.scene.paint.Color.BLACK);</b>
<b class="nc">&nbsp;                gridRectangle.setStrokeWidth(0.5);</b>
&nbsp;
<b class="nc">&nbsp;                int finalJ = gridSize / 2 - j; // Invert the y-coordinate</b>
<b class="nc">&nbsp;                int finalI = i - gridSize / 2;</b>
&nbsp;
<b class="nc">&nbsp;                if ((Math.abs(finalI) == Math.abs(finalJ)) || (finalI == finalJ) || (finalI % 2 == 0 &amp;&amp; finalJ % 2 == 0) || ((finalI + finalJ) % 2 == 0)) {</b>
<b class="nc">&nbsp;                    ArrayList&lt;Integer&gt; coordinates = new ArrayList&lt;&gt;();</b>
<b class="nc">&nbsp;                    coordinates.add(finalI);</b>
<b class="nc">&nbsp;                    coordinates.add(finalJ);</b>
<b class="nc">&nbsp;                    gridRectangle.setUserData(coordinates);</b>
<b class="nc">&nbsp;                    gridRectangle.setOnMouseClicked(e -&gt; System.out.println(&quot;Rectangle at (&quot; + finalI + &quot;, &quot; + finalJ + &quot;) was clicked!&quot;));</b>
<b class="nc">&nbsp;                    controller.addRectangleToGridMap(gridRectangle);</b>
<b class="nc">&nbsp;                    movableRoot.getChildren().addAll(gridRectangle/*, label*/);</b>
&nbsp;                }
&nbsp;            }
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * creates and sets the translation animation for the board
&nbsp;     *
&nbsp;     * @param scene       the scene where the animation is set
&nbsp;     * @param movableRoot the group containing the board
&nbsp;     */
&nbsp;    private void createCameraTranslate(Scene scene, Group movableRoot) {
<b class="nc">&nbsp;        Translate cameraTranslate = new Translate();</b>
<b class="nc">&nbsp;        movableRoot.getTransforms().add(cameraTranslate);</b>
<b class="nc">&nbsp;        cameraTranslate.setX(350);</b>
<b class="nc">&nbsp;        cameraTranslate.setY(250);</b>
&nbsp;
&nbsp;        // Add key listeners to the scene to move the camera
<b class="nc">&nbsp;        scene.setOnKeyPressed(e -&gt; {</b>
<b class="nc">&nbsp;            switch (e.getCode()) {</b>
&nbsp;                case W:
<b class="nc">&nbsp;                    if (cameraTranslate.getY() &lt;= 1500) cameraTranslate.setY(cameraTranslate.getY() + 20);</b>
&nbsp;                    break;
&nbsp;                case S:
<b class="nc">&nbsp;                    if (cameraTranslate.getY() &gt;= -1500) cameraTranslate.setY(cameraTranslate.getY() - 20);</b>
&nbsp;                    break;
&nbsp;                case A:
<b class="nc">&nbsp;                    if (cameraTranslate.getX() &lt;= 2000) cameraTranslate.setX(cameraTranslate.getX() + 20);</b>
&nbsp;                    break;
&nbsp;                case D:
<b class="nc">&nbsp;                    if (cameraTranslate.getX() &gt;= -2000) cameraTranslate.setX(cameraTranslate.getX() - 20);</b>
&nbsp;                    break;
&nbsp;            }
&nbsp;        });
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * method to instantiate the winners scene
&nbsp;     */
&nbsp;    @Override
&nbsp;    public void drawWinnerScene() {
<b class="nc">&nbsp;        StackPane root = new StackPane();</b>
&nbsp;
<b class="nc">&nbsp;        InputStream is = getClass().getResourceAsStream(&quot;/graphics/CODEX_wallpaper_pattern.png&quot;);</b>
<b class="nc">&nbsp;        ImageView imageView = createImageView(root, is);</b>
&nbsp;
<b class="nc">&nbsp;        Button backButton = new Button(&quot;Back to Menu&quot;);</b>
&nbsp;
&nbsp;        //adding listeners
<b class="nc">&nbsp;        backButton.setOnAction(actionEvent -&gt; {</b>
<b class="nc">&nbsp;            clientSocket.disconnect();</b>
<b class="nc">&nbsp;            drawHelloScene();</b>
&nbsp;        });
&nbsp;
<b class="nc">&nbsp;        stageReference.setTitle(&quot;Codex! - Game Ended&quot;);</b>
&nbsp;
<b class="nc">&nbsp;        backButton.setTranslateY(50);</b>
<b class="nc">&nbsp;        root.getChildren().addAll(imageView, winnerLabel, backButton);</b>
&nbsp;
<b class="nc">&nbsp;        Scene scene = new Scene(root);</b>
<b class="nc">&nbsp;        scene.getStylesheets().add(&quot;/codexTheme.css&quot;);</b>
<b class="nc">&nbsp;        stageReference.setScene(scene);</b>
<b class="nc">&nbsp;        stageReference.show();</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * utility method to display an alert
&nbsp;     *
&nbsp;     * @param alert the alert string to be displayed
&nbsp;     */
&nbsp;    @Override
&nbsp;    public void displayAlert(String alert) {
&nbsp;        //show dialog box containing string alert
<b class="nc">&nbsp;        displayTimedAlertText(alert, 7);</b>
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    /**
&nbsp;     * method to set the text for the turn display in the board scene
&nbsp;     *
&nbsp;     * @param text the text to set in the turn display
&nbsp;     */
&nbsp;    public void setYouTurnDisplay(Text text) {
<b class="nc">&nbsp;        this.turnText = text;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * method to display a timed alert text
&nbsp;     *
&nbsp;     * @param text  the text to display
&nbsp;     * @param timer the time the text will be displayed
&nbsp;     */
&nbsp;    private void displayTimedAlertText(String text, Integer timer) {
<b class="nc">&nbsp;        this.alert.setText(text);</b>
<b class="nc">&nbsp;        alert.getStyleClass().add(&quot;alert-text&quot;);</b>
<b class="nc">&nbsp;        PauseTransition delay = new PauseTransition(Duration.seconds(timer));</b>
<b class="nc">&nbsp;        delay.setOnFinished(event -&gt; alert.setText(&quot;&quot;));</b>
<b class="nc">&nbsp;        alert.setX(100);</b>
<b class="nc">&nbsp;        alert.setY(50);</b>
<b class="nc">&nbsp;        delay.play();</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * method that removes a rectangle node from the board and re adds it to bring it to the front
&nbsp;     *
&nbsp;     * @param rectangle the rectangle to bring to the front
&nbsp;     */
&nbsp;    public void bringRectangleToFront(Rectangle rectangle) {
<b class="nc">&nbsp;        Group parent = (Group) rectangle.getParent();</b>
<b class="nc">&nbsp;        parent.getChildren().remove(rectangle);</b>
<b class="nc">&nbsp;        parent.getChildren().add(rectangle);</b>
&nbsp;    }
&nbsp;
&nbsp;    //GETTER
&nbsp;
&nbsp;    /**
&nbsp;     * method to get the chat group
&nbsp;     *
&nbsp;     * @return the chat group reference
&nbsp;     */
&nbsp;    public Group getChatGroup() {
<b class="nc">&nbsp;        return chatGroup;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * method to get the place to append the chat text
&nbsp;     *
&nbsp;     * @return the chat text
&nbsp;     */
&nbsp;    public TextArea getChatText() {
<b class="nc">&nbsp;        return chatText;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * method to get the place to append the turn text
&nbsp;     *
&nbsp;     * @return the chat text
&nbsp;     */
&nbsp;    public Text getTurnText() {
<b class="nc">&nbsp;        return turnText;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * method to get the background rectangle of the initial card
&nbsp;     *
&nbsp;     * @return the rectangle of the initial card
&nbsp;     */
&nbsp;    public Rectangle getInitCardBackground() {
<b class="nc">&nbsp;        return initCardBackground;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * method to set the winner label
&nbsp;     *
&nbsp;     * @param winner the winner
&nbsp;     */
&nbsp;    public void setWinnerLabel(String winner) {
<b class="nc">&nbsp;        winnerLabel.setText(winner);</b>
&nbsp;    }
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2024-05-30 18:54</div>
</div>
</body>
</html>
