


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=windows-1252"> 
  <title>Coverage Report > CliView</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">codex.lb04.View.Cli</a>
</div>

<h1>Coverage Summary for Class: CliView (codex.lb04.View.Cli)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Branch, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">CliView</td>
<td class="coverageStat">
  <span class="percent">
    65,4%
  </span>
  <span class="absValue">
    (17/26)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    36,4%
  </span>
  <span class="absValue">
    (8/22)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    63%
  </span>
  <span class="absValue">
    (51/81)
  </span>
</td>
</tr>
  <tr>
    <td class="name">CliView$1</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    63%
  </span>
  <span class="absValue">
    (17/27)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    36,4%
  </span>
  <span class="absValue">
    (8/22)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    62,2%
  </span>
  <span class="absValue">
    (51/82)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package codex.lb04.View.Cli;
&nbsp;
&nbsp;import codex.lb04.View.Cli.State.CliBoardState;
&nbsp;import codex.lb04.View.Cli.State.CliViewState;
&nbsp;import codex.lb04.View.View;
&nbsp;
&nbsp;import java.util.ArrayList;
&nbsp;import java.util.Scanner;
&nbsp;
&nbsp;import static java.lang.System.out;
&nbsp;
&nbsp;/**
&nbsp; * This class represents the view of the game in CLI mode
&nbsp; */
&nbsp;public class CliView extends View implements Runnable {
<b class="fc">&nbsp;    private CliViewState state = CliViewState.HELLO;</b>
&nbsp;    ArrayList&lt;String&gt; lobby;
&nbsp;    CliBoardModel boardModel;
&nbsp;    CliController controller;
&nbsp;    private final ArrayList&lt;String&gt; chat;
&nbsp;
&nbsp;    private static Scanner scanner;
&nbsp;
&nbsp;    /**
&nbsp;     * Constructor for the CliView
&nbsp;     */
<b class="fc">&nbsp;    public CliView() {</b>
<b class="fc">&nbsp;        this.lobby = new ArrayList&lt;&gt;();</b>
<b class="fc">&nbsp;        this.boardModel = new CliBoardModel();</b>
<b class="fc">&nbsp;        this.controller = new CliController(this);</b>
<b class="fc">&nbsp;        this.chat = new ArrayList&lt;&gt;();</b>
<b class="fc">&nbsp;        scanner = new Scanner(System.in);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * This method is called when the view is started
&nbsp;     */
&nbsp;    public void run() {
<b class="nc">&nbsp;        drawHelloScene();</b>
&nbsp;        //game loop to keep the view running and waiting for input
&nbsp;        //noinspection InfiniteLoopStatement
&nbsp;        while (true) {
<b class="nc">&nbsp;            String input = scanner.nextLine().trim().toUpperCase();</b>
<b class="nc">&nbsp;            controller.handleInput(input);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Prints a string to the standard output that welcomes a player.
&nbsp;     */
&nbsp;    @Override
&nbsp;    public void drawHelloScene() {
<b class="fc">&nbsp;        printSpaces();</b>
<b class="fc">&nbsp;        out.println(&quot;&quot;&quot;</b>
&nbsp;                 ___               _                           \s
&nbsp;                (  _`\\            ( )                          \s
&nbsp;                | ( (_)   _      _| |   __                     \s
&nbsp;                | |  _  /&#39;_`\\  /&#39;_` | /&#39;__`(`\\/&#39;)              \s
&nbsp;                | (_( )( (_) )( (_| |(  ___/&gt;  &lt;               \s
&nbsp;                (____/&#39;`\\___/&#39;`\\__,_)`\\____|_/\\_)              \s
&nbsp;                 _   _         _                     _         \s
&nbsp;                ( ) ( )       ( )_                  (_ ) _     \s
&nbsp;                | `\\| |   _ _ | ,_) _   _  _ __  _ _ | |(_) ___\s
&nbsp;                | , ` | /&#39;_` )| |  ( ) ( )( &#39;__)&#39;_` )| || /&#39;,__)
&nbsp;                | |`\\ |( (_| || |_ | (_) || | ( (_| || || \\__, \\
&nbsp;                (_) (_)`\\__,_)`\\__)`\\___/&#39;(_) `\\__,_|___|_|____/\s
&nbsp;                by Pitesse, Barde, AlexIlLeone, Brio&quot;&quot;&quot;);
<b class="fc">&nbsp;        out.println();</b>
<b class="fc">&nbsp;        out.println();</b>
<b class="fc">&nbsp;        out.println(&quot;Welcome to Codex Naturalis Board Game!&quot;);</b>
<b class="fc">&nbsp;        out.println(&quot;Press &#39;C&#39; to Create a Game or &#39;J&#39; to Join a Game&quot;);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Draw the login scene
&nbsp;     */
&nbsp;    @Override
&nbsp;    public void drawLoginScene() {
<b class="fc">&nbsp;        printSpaces();</b>
<b class="fc">&nbsp;        out.println(&quot;If you want to go back press B, else press L to login&quot;);</b>
&nbsp;
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Draw the lobby scene
&nbsp;     */
&nbsp;    @Override
&nbsp;    public void drawLobbyScene() {
<b class="fc">&nbsp;        boardModel.resetBoard();</b>
<b class="fc">&nbsp;        setState(CliViewState.LOBBY);</b>
<b class="fc">&nbsp;        printSpaces();</b>
<b class="fc">&nbsp;        out.println(&quot;CODEX - LOBBY:&quot;);</b>
<b class="pc">&nbsp;        for (String name : lobby) {</b>
<b class="nc">&nbsp;            out.println(&quot;   &quot; + name);</b>
&nbsp;        }
<b class="fc">&nbsp;        out.println(&quot;If you want to go back press &#39;B&#39;, else press &#39;P&#39; to start the game&quot;);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Draw the create game scene
&nbsp;     */
&nbsp;    @Override
&nbsp;    public void drawCreateGameScene() {
<b class="fc">&nbsp;        printSpaces();</b>
<b class="fc">&nbsp;        out.println(&quot;press any key to continue and set the number of players and your username&quot;);</b>
<b class="fc">&nbsp;        out.println(&quot;press &#39;B&#39; to go back&quot;);</b>
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    /**
&nbsp;     * Draw the board scene
&nbsp;     */
&nbsp;    @Override
&nbsp;    public void drawBoardScene() {
<b class="fc">&nbsp;        printSpaces();</b>
<b class="fc">&nbsp;        drawPlayedCards();</b>
<b class="fc">&nbsp;        drawHand();</b>
<b class="fc">&nbsp;        drawVisibleCards();</b>
<b class="fc">&nbsp;        drawChoices();</b>
<b class="fc">&nbsp;        drawInitialCard();</b>
<b class="fc">&nbsp;        displayPoints();</b>
<b class="fc">&nbsp;        drawTurnLabel();</b>
<b class="fc">&nbsp;        displayCommands();</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Draw the hand from the local model
&nbsp;     */
&nbsp;    private void drawHand() {
<b class="fc">&nbsp;        boardModel.printHand();</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Draw the initial card from the local model
&nbsp;     */
&nbsp;    private void drawInitialCard() {
<b class="fc">&nbsp;        boardModel.printInitial();</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Display the commands that the player can use
&nbsp;     */
&nbsp;    private void displayCommands() {
<b class="pc">&nbsp;        if (boardModel.getBoardState() == CliBoardState.PLACING || boardModel.getBoardState() == CliBoardState.SELECTING) {</b>
<b class="nc">&nbsp;            out.println(&quot;First press 0,1 or 2 to select a card from your hand then,   F) to flip it     P) to place it    B) to deselect it &quot;);</b>
&nbsp;            //out.println(&quot;normal turn: first place then draw&quot;);
&nbsp;        }
<b class="pc">&nbsp;        if (boardModel.getBoardState() == CliBoardState.DRAWING) {</b>
<b class="nc">&nbsp;            out.println(&quot;First press 3,4,5,6,7 or 8 to draw a card&quot;);</b>
&nbsp;            //out.println(&quot;normal turn: first place then draw&quot;);
&nbsp;        }
<b class="pc">&nbsp;        if (boardModel.getBoardState() == CliBoardState.END) {</b>
<b class="fc">&nbsp;            out.println(&quot;finished! press E to pass the turn&quot;);</b>
&nbsp;            //out.println(&quot;normal turn: first place then draw&quot;);
&nbsp;        }
<b class="pc">&nbsp;        if (boardModel.getInitialCard() != null) {</b>
<b class="nc">&nbsp;            out.println(&quot;First things first select the face of the initial card by pressing F if you want to flip it, once you&#39;ve done it place it by pressing P&quot;);</b>
&nbsp;        }
<b class="fc">&nbsp;        out.println(&quot;press &#39;C&#39; to chat&quot;);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Draw the turn label from the local model
&nbsp;     */
&nbsp;    private void drawTurnLabel() {
<b class="fc">&nbsp;        out.println(&quot;-----------------------------------------------------------------------------------&quot; +</b>
<b class="fc">&nbsp;                boardModel.getTurnLabel() +</b>
&nbsp;                &quot;-------------------------------------------------------------------------------------&quot;);
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Draw the visible cards from the local model
&nbsp;     */
&nbsp;    private void drawVisibleCards() {
<b class="fc">&nbsp;        boardModel.printVisibleCards();</b>
&nbsp;
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Draw the played cards from the local model
&nbsp;     */
&nbsp;    private void drawPlayedCards() {
<b class="fc">&nbsp;        boardModel.printGridMap();</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Draw the choices from the local model
&nbsp;     */
&nbsp;    private void drawChoices() {
&nbsp;
<b class="fc">&nbsp;        boardModel.displayChoices();</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Display the points from the local model
&nbsp;     */
&nbsp;    private void displayPoints() {
<b class="fc">&nbsp;        out.println(&quot;Score: &quot; + boardModel.printPoints());</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Draw the winner scene scaffold
&nbsp;     */
&nbsp;    @Override
&nbsp;    public void drawWinnerScene() {
<b class="nc">&nbsp;        printSpaces();</b>
<b class="nc">&nbsp;        out.println(&quot;The game is over!&quot;);</b>
<b class="nc">&nbsp;        out.println(&quot;press any key to continue&quot;);</b>
<b class="nc">&nbsp;        out.println();</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * print the winner
&nbsp;     *
&nbsp;     * @param winner the winner string already formatted passed by the controller
&nbsp;     */
&nbsp;    public void showWinners(String winner) {
<b class="nc">&nbsp;        out.println(winner);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Update the lobby and draw it
&nbsp;     *
&nbsp;     * @param lobby the arraylist of players in the lobby
&nbsp;     */
&nbsp;    @Override
&nbsp;    public void updateLobby(ArrayList&lt;String&gt; lobby) {
<b class="nc">&nbsp;        this.lobby = lobby;</b>
<b class="nc">&nbsp;        System.out.println(&quot;Players in the lobby:\n&quot;);</b>
<b class="nc">&nbsp;        drawLobbyScene();</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Display an alert by redrawing the state and adding the alert
&nbsp;     *
&nbsp;     * @param alert the alert to be displayed
&nbsp;     */
&nbsp;    @Override
&nbsp;    public void displayAlert(String alert) {
<b class="nc">&nbsp;        drawState();</b>
<b class="nc">&nbsp;        out.println(alert);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Draw the current scene based on the state
&nbsp;     */
&nbsp;    private void drawState() {
<b class="nc">&nbsp;        switch (state) {</b>
&nbsp;            case HELLO:
<b class="nc">&nbsp;                drawHelloScene();</b>
&nbsp;                break;
&nbsp;            case LOGIN:
<b class="nc">&nbsp;                drawLoginScene();</b>
&nbsp;                break;
&nbsp;            case LOBBY:
<b class="nc">&nbsp;                drawLobbyScene();</b>
&nbsp;                break;
&nbsp;            case CREATE_GAME:
<b class="nc">&nbsp;                drawCreateGameScene();</b>
&nbsp;                break;
&nbsp;            case BOARD:
<b class="nc">&nbsp;                drawBoardScene();</b>
&nbsp;                break;
&nbsp;            case END:
&nbsp;                break;
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Print spaces to the standard output
&nbsp;     */
&nbsp;    private void printSpaces() {
<b class="fc">&nbsp;        for (int i = 0; i &lt; 100; i++) {</b>
<b class="fc">&nbsp;            out.println();</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Update the chat
&nbsp;     *
&nbsp;     * @param message the message to be added
&nbsp;     */
&nbsp;    public void updateChat(String message) {
<b class="nc">&nbsp;        chat.add(message);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Show the chat
&nbsp;     */
&nbsp;    public void showChat() {
<b class="nc">&nbsp;        printSpaces();</b>
&nbsp;
<b class="nc">&nbsp;        out.println(&quot;----------------------------------------------------------------------------------- &quot; +</b>
&nbsp;                &quot;CHAT: &quot; +
&nbsp;                &quot;-----------------------------------------------------------------------------------&quot;);
<b class="nc">&nbsp;        for (String message : chat) {</b>
<b class="nc">&nbsp;            out.println(&quot;   &quot; + message);</b>
&nbsp;        }
<b class="nc">&nbsp;        out.println(&quot;write a message below or press &#39;B&#39; to go back&quot;);</b>
&nbsp;    }
&nbsp;
&nbsp;    //GETTER
&nbsp;
&nbsp;    /**
&nbsp;     * Gets the state
&nbsp;     *
&nbsp;     * @return the state
&nbsp;     */
&nbsp;    public CliViewState getState() {
<b class="nc">&nbsp;        return state;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Gets the board
&nbsp;     *
&nbsp;     * @return the board
&nbsp;     */
&nbsp;    public CliBoardModel getBoard() {
<b class="fc">&nbsp;        return boardModel;</b>
&nbsp;    }
&nbsp;
&nbsp;    //SETTER
&nbsp;
&nbsp;    /**
&nbsp;     * Sets the state
&nbsp;     *
&nbsp;     * @param state the state
&nbsp;     */
&nbsp;    public void setState(CliViewState state) {
<b class="fc">&nbsp;        this.state = state;</b>
&nbsp;    }
&nbsp;
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2024-05-28 12:20</div>
</div>
</body>
</html>
